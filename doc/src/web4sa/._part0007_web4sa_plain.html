<?xml version="1.0" encoding="utf-8" ?>
<!--
Automatically generated HTML file from Doconce source
(http://code.google.com/p/doconce/)
-->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />
<meta name="description" content="Using Web Frameworks for Scientific Web Applications">
<meta name="keywords" content="web frameworks,MVC pattern,Flask installation,Flask input forms,Flask HTML templates,Flask MVC pattern,Flask troubleshooting,Django installation,Django making a project,Django making an application,Django input forms,Django HTML templates,Flask input forms,Flask error checking,Flask CSS style sheets,Flask LaTeX mathematics,Flask input validation,Django input forms,Django input validation">



<style type="text/css">
    body {
      font-family: Helvetica, Verdana, Arial, Sans-serif;
      color: #404040;
      background: #ffffff;
    }
    h1 { font-size: 1.8em;  color: #8A0808; }
    h2 { font-size: 1.5em;  color: #8A0808; }
    h3, h4 { color: #8A0808; }
    a { color: #8A0808; text-decoration:none; }
    tt { font-family: "Courier New", Courier; }
    pre { background: #ededed; color: #000; padding: 15px;}
    p { text-indent: 0px; }
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-style: normal; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}

</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Web frameworks ', 1, None, '___sec0'),
              (' The MVC pattern ', 2, None, '___sec1'),
              (' A very simple application ', 2, None, '___sec2'),
              (' Application of the MVC pattern ',
               2,
               'wf:hw:mvc',
               'wf:hw:mvc'),
              (' Making a Flask application ', 1, None, '___sec4'),
              (' Programming the Flask application ', 2, None, '___sec5'),
              (' Equipping the input page with output results ',
               2,
               None,
               '___sec6'),
              (' Splitting the app into model, view, and controller files ',
               2,
               'wf:hw3:flask',
               'wf:hw3:flask'),
              (' Troubleshooting ', 2, None, '___sec8'),
              (' Making a Django application ', 1, None, '___sec9'),
              (' Installing Django ', 2, None, '___sec10'),
              (' Setting up a Django project ', 2, None, '___sec11'),
              (' Setting up a Django application ', 2, None, '___sec12'),
              (' Programming the Django application ', 2, None, '___sec13'),
              (' Equipping the input page with output results ',
               2,
               None,
               '___sec14'),
              (' Handling multiple input variables in Flask ',
               1,
               'wf:vib:flask',
               'wf:vib:flask'),
              (' Programming the Flask application ', 2, None, '___sec16'),
              (' Implementing error checking in the template ',
               2,
               None,
               '___sec17'),
              (' Using style sheets ', 2, None, '___sec18'),
              (' Using LaTeX mathematics ', 2, None, '___sec19'),
              (' Rearringing the elements in the HTML template ',
               2,
               None,
               '___sec20'),
              (' User-provided validation ', 2, None, '___sec21'),
              (' Autogenerating the code ',
               2,
               'wf:vib3:flask:autogen',
               'wf:vib3:flask:autogen'),
              (' Handling multiple input variables in Django ',
               1,
               'wf:vib:django',
               'wf:vib:django'),
              (' Programming the Django application ', 2, None, '___sec24'),
              (' User-provided validation ', 2, None, '___sec25'),
              (' Exercises ', 1, None, '___sec26'),
              (' Exercise 1: Add two numbers ',
               2,
               'wf:exer:add2',
               'wf:exer:add2'),
              (' Remaining ', 1, None, '___sec28')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "AMS"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- Fix slow MathJax rendering in IE8 -->
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">




    
<a name="part0007"></a>

    <a href="._part0006_web4sa_plain.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/prev1.png" border=0 alt="previous"></a>
    
    <a href="._part0008_web4sa_plain.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
    <p>
<!-- !split -->

<h3>Programming the Django application  <a name="___sec13"></a></h3>

<p>

The Django application is about filling the files <code>views.py</code> and <code>models.py</code>
with content. The mathematical computations are performed in <code>compute.py</code>
so we copy this file from the <code>mvc</code> directory to the <code>hw1_django</code> directory
for convenience (we could alternatively add <code>../mvc</code> to <code>sys.path</code> such that
<code>import compute</code> would work from the <code>hw1_django</code> directory).

<p>

<b>The model.</b>
The <code>models.py</code> file contains the model which consists
of the data we need in the application, stored in Django's data types.
Our data consists of one number, called <code>r</code>, and <code>models.py</code> then
look like

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">django.db</span> <span style="color: #008000; font-weight: bold">import</span> models
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">django.forms</span> <span style="color: #008000; font-weight: bold">import</span> ModelForm

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Input</span>(models<span style="color: #666666">.</span>Model):
    r <span style="color: #666666">=</span> models<span style="color: #666666">.</span>FloatField()

<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">InputForm</span>(ModelForm):
    <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Meta</span>:
        model <span style="color: #666666">=</span> Input
</pre></div>
<p>
The <code>Input</code> class lists variables representing data as static class
attributes. The <code>django.db.models</code> module contains various classes
for different types of data, here we use <code>FloatField</code> to represent
a floating-point number (corresponding to a Python <code>float</code>).
The <code>InputForm</code> class has a the shown generic form across applications
if we by convention apply the name <code>Input</code> for the class holding the data.

<p>

<b>The view.</b>
The <code>views.py</code> file contains a function <code>index</code> which performs
the actions we want to perform when invoking
the URL ( here <code>http://127.0.0.1:8000/hw/</code>).
In addition, <code>views.py</code> has the <code>present_output</code> function from
the <code>view.py</code> file in the <code>mvc_django</code> directory.

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">django.shortcuts</span> <span style="color: #008000; font-weight: bold">import</span> render_to_response
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">django.template</span> <span style="color: #008000; font-weight: bold">import</span> RequestContext
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">django.http</span> <span style="color: #008000; font-weight: bold">import</span> HttpResponse
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">models</span> <span style="color: #008000; font-weight: bold">import</span> InputForm
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">compute</span> <span style="color: #008000; font-weight: bold">import</span> compute

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">index</span>(request):
    <span style="color: #008000; font-weight: bold">if</span> request<span style="color: #666666">.</span>method <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;POST&#39;</span>:
        form <span style="color: #666666">=</span> InputForm(request<span style="color: #666666">.</span>POST)
        <span style="color: #008000; font-weight: bold">if</span> form<span style="color: #666666">.</span>is_valid():
            form <span style="color: #666666">=</span> form<span style="color: #666666">.</span>save(commit<span style="color: #666666">=</span><span style="color: #008000">False</span>)
            <span style="color: #008000; font-weight: bold">return</span> present_output(form)
    <span style="color: #008000; font-weight: bold">else</span>:
        form <span style="color: #666666">=</span> InputForm()

    <span style="color: #008000; font-weight: bold">return</span> render_to_response(<span style="color: #BA2121">&#39;hw1.html&#39;</span>,
            {<span style="color: #BA2121">&#39;form&#39;</span>: form}, context_instance<span style="color: #666666">=</span>RequestContext(request))

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">present_output</span>(form):
    r <span style="color: #666666">=</span> form<span style="color: #666666">.</span>r
    s <span style="color: #666666">=</span> compute(r)
    <span style="color: #008000; font-weight: bold">return</span> HttpResponse(<span style="color: #BA2121">&#39;Hello, World! sin(</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">)=</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> (r, s))
</pre></div>
<p>

The <code>index</code> function deserves some explanation. It must take one
argument, usually called <code>request</code>. There are two modes in the function. Either
the user has provided input on the web page, which means that
<code>request.method</code> equals <code>'POST'</code>, or we show a new web page
with which the user is supposed to interact.

<p>

<b>Making the input page.</b>
The input consists of a web form with
one field where we can fill in our <code>r</code> variable. This page
is realized by the two central statements

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #408080; font-style: italic"># Make info needed in the web form</span>
form <span style="color: #666666">=</span> InputForm()
<span style="color: #408080; font-style: italic"># Make HTML code</span>
render_to_response(<span style="color: #BA2121">&#39;hw1.html&#39;</span>,
    {<span style="color: #BA2121">&#39;form&#39;</span>: form}, context_instance<span style="color: #666666">=</span>RequestContext(request))
</pre></div>
<p>
The <code>hw1.html</code> file resides in the <code>templates</code> subdirectory and contains
a template for the HTML code:

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">&lt;form</span> <span style="color: #7D9029">method=</span><span style="color: #BA2121">&quot;post&quot;</span> <span style="color: #7D9029">action=</span><span style="color: #BA2121">&quot;&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>{% csrf_token %}
    Hello, World! The sine of {{ form.r }}
    <span style="color: #008000; font-weight: bold">&lt;input</span> <span style="color: #7D9029">type=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value=</span><span style="color: #BA2121">&quot;equals&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/form&gt;</span>
</pre></div>
<p>
This is a <em>template file</em> because it contains instructions like
<code>{% csrf_token %}</code> and variables like <code>{{ form.r }}</code>. Django will
replace the former by some appropriate HTML statements, while the
latter simply extracts the numerical value of the variable <code>r</code> in
our form (specified in the <code>Input</code> class in <code>models.py</code>).
Typically, this <code>hw1.html</code> file
results in the HTML code

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">&lt;form</span> <span style="color: #7D9029">method=</span><span style="color: #BA2121">&quot;post&quot;</span> <span style="color: #7D9029">action=</span><span style="color: #BA2121">&quot;&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;div</span> <span style="color: #7D9029">style=</span><span style="color: #BA2121">&#39;display:none&#39;</span><span style="color: #008000; font-weight: bold">&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;input</span> <span style="color: #7D9029">type=</span><span style="color: #BA2121">&#39;hidden&#39;</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&#39;csrfmiddlewaretoken&#39;</span>
<span style="color: #7D9029">value=</span><span style="color: #BA2121">&#39;oPWMuuy1gLlXm9GvUZINv49eVUYnux5Q&#39;</span> <span style="color: #008000; font-weight: bold">/&gt;&lt;/div&gt;</span>
    Hello, World! The sine of <span style="color: #008000; font-weight: bold">&lt;input</span> <span style="color: #7D9029">type=</span><span style="color: #BA2121">&quot;text&quot;</span> <span style="color: #7D9029">name=</span><span style="color: #BA2121">&quot;r&quot;</span> <span style="color: #7D9029">id=</span><span style="color: #BA2121">&quot;id_r&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;input</span> <span style="color: #7D9029">type=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value=</span><span style="color: #BA2121">&quot;equals&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/form&gt;</span>
</pre></div>
<p>
Figure <a href="#wf:hw1:django:fig:input">4</a> shows how the input page looks like in the
web browser.

<p>

<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 4:  The input page. <a name="wf:hw1:django:fig:input"></a> </p></center>
<p><img src="fig-web4sa/hw1_django_input.png" align="bottom" width=600></p>
</center>

<p>

<b>Making the results page.</b>
When then user has filled in a value in the text field on the input
page, the <code>index</code> function is called again and <code>request.method</code> equals
<code>'POST'</code>. A new form object is made, this time with user info (<code>request.POST</code>).
We can check that the form is valid and if so, proceed with
computations followed by presenting the results in a
new web page (see Figure <a href="#wf:hw1:django:fig:result">5</a>):

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">index</span>(request):
    <span style="color: #008000; font-weight: bold">if</span> request<span style="color: #666666">.</span>method <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;POST&#39;</span>:
        form <span style="color: #666666">=</span> InputForm(request<span style="color: #666666">.</span>POST)
        <span style="color: #008000; font-weight: bold">if</span> form<span style="color: #666666">.</span>is_valid():
            form <span style="color: #666666">=</span> form<span style="color: #666666">.</span>save(commit<span style="color: #666666">=</span><span style="color: #008000">False</span>)
            <span style="color: #008000; font-weight: bold">return</span> present_output(form)

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">present_output</span>(form):
    r <span style="color: #666666">=</span> form<span style="color: #666666">.</span>r
    s <span style="color: #666666">=</span> compute(r)
    <span style="color: #008000; font-weight: bold">return</span> HttpResponse(<span style="color: #BA2121">&#39;Hello, World! sin(</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">)=</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> (r, s))
</pre></div>
<p>
The numerical value of <code>r</code> as given by the user is available as <code>form.r</code>.
Instead of using a template for the output page, which is natural to
do in more advanced cases, we here illustrate the possibility to
send raw HTML to the output page by returning an <code>HttpResponse</code>
object initialized by a string containing the desired HTML code.

<p>

<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 5:  The result page. <a name="wf:hw1:django:fig:result"></a> </p></center>
<p><img src="fig-web4sa/hw1_django_output.png" align="bottom" width=600></p>
</center>

<p>

Launch this application by filling in the address <code>http://127.0.0.1:8000/hw/</code>
in your web browser (make sure the Django development server is running,
and if not, restart it by <code>python manage.py runserver</code>). Try to fill
in some number on the input page and view the output.
To show how easy it is to change the application, invoke the <code>views.py</code>
file in an editor and add some color to the output HTML code from
the <code>present_output</code> function:

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">    <span style="color: #008000; font-weight: bold">return</span> HttpResponse(<span style="color: #BA2121">&quot;&quot;&quot;</span>
<span style="color: #BA2121">&lt;font color=&#39;blue&#39;&gt;Hello&lt;/font&gt;, World!</span>
<span style="color: #BA2121">sin(</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">)=</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121"></span>
<span style="color: #BA2121">&quot;&quot;&quot;</span><span style="color: #666666">%</span> (r, s))
</pre></div>
<p>
Go back to the input page, provide a new number, and observe how
the "Hello" word now has a blue color.

<p>


<h3>Equipping the input page with output results  <a name="___sec14"></a></h3>

<p>

Instead of making a separate output page with the result, we can
simply add the sine value to the input page. This makes the user
feel that she interacts with the same page, as when operating a calculator.
The output page should then look as shown in Figure <a href="#wf:hw2:django:fig:result">6</a>.

<p>

<center> <!-- figure -->
<hr class="figure">
<center><p class="caption">Figure 6:  The modified result page. <a name="wf:hw2:django:fig:result"></a> </p></center>
<p><img src="fig-web4sa/hw2_django_output.png" align="bottom" width=600></p>
</center>

<p>

We need to make a new Django application, now called <code>hw2_django</code>.
Instead of running
<code>manage.py startapp hw2_django</code> we can simply copy the <code>hw1_django</code>
directory. We need, of course, to add information about this
new application in <code>settings.py</code> and <code>urls.py</code>.
In the former file we must have

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">TEMPLATE_DIRS <span style="color: #666666">=</span> (
    relative2absolute_path(<span style="color: #BA2121">&#39;../../apps/hw1_django/templates&#39;</span>),
    relative2absolute_path(<span style="color: #BA2121">&#39;../../apps/hw2_django/templates&#39;</span>),
)

INSTALLED_APPS <span style="color: #666666">=</span> (
    <span style="color: #BA2121">&#39;django.contrib.auth&#39;</span>,
    <span style="color: #BA2121">&#39;django.contrib.contenttypes&#39;</span>,
    <span style="color: #BA2121">&#39;django.contrib.sessions&#39;</span>,
    <span style="color: #BA2121">&#39;django.contrib.sites&#39;</span>,
    <span style="color: #BA2121">&#39;django.contrib.messages&#39;</span>,
    <span style="color: #BA2121">&#39;django.contrib.staticfiles&#39;</span>,
    <span style="color: #408080; font-style: italic"># Uncomment the next line to enable the admin:</span>
    <span style="color: #408080; font-style: italic"># &#39;django.contrib.admin&#39;,</span>
    <span style="color: #408080; font-style: italic"># Uncomment the next line to enable admin documentation:</span>
    <span style="color: #408080; font-style: italic"># &#39;django.contrib.admindocs&#39;,</span>
    <span style="color: #BA2121">&#39;hw1_django&#39;</span>,
    <span style="color: #BA2121">&#39;hw2_django&#39;</span>,
)
</pre></div>
<p>
In <code>urls.py</code> we add the URL <code>hw2</code> which is to call our <code>index</code> function
in the <code>views.py</code> file of the <code>hw2_django</code> app:

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">urlpatterns <span style="color: #666666">=</span> patterns(<span style="color: #BA2121">&#39;&#39;</span>,
    url(<span style="color: #BA2121">r&#39;^hw1/&#39;</span>, <span style="color: #BA2121">&#39;hw1_django.views.index&#39;</span>),
    url(<span style="color: #BA2121">r&#39;^hw2/&#39;</span>, <span style="color: #BA2121">&#39;hw2_django.views.index&#39;</span>),
</pre></div>
<p>

The <code>views.py</code> file changes a bit since we shall generate almost the same
web page on input and output. This makes the <code>present_output</code> function
unnatural, and everything is done within the <code>index</code> function:

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">index</span>(request):
    s <span style="color: #666666">=</span> <span style="color: #008000">None</span>  <span style="color: #408080; font-style: italic"># initial value of result</span>
    <span style="color: #008000; font-weight: bold">if</span> request<span style="color: #666666">.</span>method <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;POST&#39;</span>:
        form <span style="color: #666666">=</span> InputForm(request<span style="color: #666666">.</span>POST)
        <span style="color: #008000; font-weight: bold">if</span> form<span style="color: #666666">.</span>is_valid():
            form <span style="color: #666666">=</span> form<span style="color: #666666">.</span>save(commit<span style="color: #666666">=</span><span style="color: #008000">False</span>)
            r <span style="color: #666666">=</span> form<span style="color: #666666">.</span>r
            s <span style="color: #666666">=</span> compute(r)
    <span style="color: #008000; font-weight: bold">else</span>:
        form <span style="color: #666666">=</span> InputForm()

    <span style="color: #008000; font-weight: bold">return</span> render_to_response(<span style="color: #BA2121">&#39;hw2.html&#39;</span>,
            {<span style="color: #BA2121">&#39;form&#39;</span>: form,
             <span style="color: #BA2121">&#39;s&#39;</span>: <span style="color: #BA2121">&#39;</span><span style="color: #BB6688; font-weight: bold">%.5f</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> s <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">isinstance</span>(s, <span style="color: #008000">float</span>) <span style="color: #008000; font-weight: bold">else</span> <span style="color: #BA2121">&#39;&#39;</span>
             }, context_instance<span style="color: #666666">=</span>RequestContext(request))
</pre></div>
<p>

Note that the output variable <code>s</code> is computed within the <code>index</code>
function and defaults to <code>None</code>. The template file <code>hw2.html</code>
looks like

<p>


<!-- code typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">&lt;form</span> <span style="color: #7D9029">method=</span><span style="color: #BA2121">&quot;post&quot;</span> <span style="color: #7D9029">action=</span><span style="color: #BA2121">&quot;&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>{% csrf_token %}
    Hello, World! The sine of {{ form.r }}
    <span style="color: #008000; font-weight: bold">&lt;input</span> <span style="color: #7D9029">type=</span><span style="color: #BA2121">&quot;submit&quot;</span> <span style="color: #7D9029">value=</span><span style="color: #BA2121">&quot;equals&quot;</span> <span style="color: #008000; font-weight: bold">/&gt;</span>
{% if s != &#39;&#39; %}
{{ s }}
{% endif %}
<span style="color: #008000; font-weight: bold">&lt;/form&gt;</span>
</pre></div>
<p>
The difference from <code>hw1.html</code> is that we right after the <em>equals</em>
button write out the value of <code>s</code>. However, we make a test that
the value is only written if it is computed, here recognized by
being a non-empty string. The <code>s</code> in the template file
is substituted by value corresponding to the key <code>'s'</code> in the
dictionary we pass to the <code>render_to_response</code>. As seen,
we pass a string where <code>s</code> is formatted with five digits if <code>s</code>
is a float, i.e., if <code>s</code> is computed. Otherwise, <code>s</code> has the
default value <code>None</code> and we send an empty string to the template.

<p>

<p>

                <a href="._part0006_web4sa_plain.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/prev1.png" border=0 alt="previous"></a>
                
                <a href="._part0008_web4sa_plain.html"><img src="https://doconce.googlecode.com/hg/bundled/html_images/next1.png" border=0 alt="next"></a>
                <!-- ------------------- end of main content --------------- -->


</body>
</html>
    

